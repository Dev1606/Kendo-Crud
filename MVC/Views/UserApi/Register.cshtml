@model WebApi.Models.UserModel


@{
    ViewBag.Title = "Register";
}




<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js" integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
   
    <div class="row justify-content-center">
        <div class="col-md-6">
        <h2>Register</h2>
            <form method="POST">

                <div class="mb-3">
                    <label for="txtUserName" class="form-label">User Name</label>
                    <input type="text" class="form-control" id="txtUserName" placeholder="User Name"/>
                </div>

                <div class="mb-3">
                    <label for="txtEmail" class="form-label">Email address</label>
                    <input type="email" class="form-control" id="txtEmail" placeholder="Email"/>
                </div>

                <div class="mb-3">
                    <label for="txtPassword" class="form-label">Password</label>
                    <input type="password" class="form-control" id="txtPassword" placeholder="Password"/>
                </div>

                <div class="mb-3">
                    <label for="txtConPassword" class="form-label">Confirm Password</label>
                    <input type="password" class="form-control" id="txtConPassword" placeholder="Confirm Password"/>
                </div>

                <div class="form-group">
                    <div class="col-md-offset-2 col-md-10">

                        <input type="button" value="Register" class="btn btn-primary" id="btnRegister" onclick="Register()" />
                        <a class="btn btn-primary" href="/UserApi/Login">Login</a>

                    </div>
                </div>
            </form>
        </div>
    </div>


<script>
    function Register() {
        var user = {
            c_uname: $("#txtUserName").val(),
            c_uemail: $("#txtEmail").val(),
            c_password: $("#txtPassword").val(),
            c_confirmpassword: $("#txtConPassword").val(),
        }
        var settings = {
            "url": "https://localhost:7068/api/UserApi/Register",
            "method": "POST",
            "timeout": 0,
            "headers": {
                "Content-Type": "application/json"
            },
            "data": JSON.stringify(user)
        }
        console.log(user);
        $.ajax(settings).done(function (response) {
            console.log(response);
            alert('Successfully Registered!');
            window.location = "/UserApi/Login";
        }).fail(function (response) {
            alert(response.responseText);
            window.location = "/UserApi/Register";
        });
    }
</script>
